(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}})();class h{constructor(){this.pieChart=null}updatePieChart(e){this.updatePieChartWithValues(e.summary.connected,e.summary.disconnected)}updatePieChartWithValues(e,a){const o=document.getElementById("components-chart");if(!o){console.error("Canvas do gráfico não encontrado");return}if(typeof window.Chart>"u"){console.error("Chart.js não está carregado");return}const t=e+a;if(this.pieChart){this.pieChart.data.datasets[0].data=[e,a],this.pieChart.options.plugins.tooltip.callbacks.label=s=>{const n=s.label||"",i=s.parsed,c=t>0?Math.round(i/t*100):0;return`${n}: ${i} (${c}%)`},this.pieChart.update("active"),console.log(`📊 Gráfico atualizado: ${e} conectados, ${a} desconectados`);return}const r={type:"pie",data:{labels:["Conectados ao DS","Fora do DS"],datasets:[{data:[e,a],backgroundColor:["#10B981","#EF4444"],borderColor:["#059669","#DC2626"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12,family:"Inter"}}},tooltip:{callbacks:{label:s=>{const n=s.label||"",i=s.parsed,c=t>0?Math.round(i/t*100):0;return`${n}: ${i} (${c}%)`}}}}}};this.pieChart=new window.Chart(o,r),console.log(`📊 Gráfico criado: ${e} conectados, ${a} desconectados`)}destroy(){this.pieChart&&(this.pieChart.destroy(),this.pieChart=null)}}class u{constructor(){this.currentTheme="system",this.STORAGE_KEY="compcount-theme",this.init()}init(){const e=localStorage.getItem(this.STORAGE_KEY);this.currentTheme=e||"system",this.applyTheme(),this.listenToSystemChanges(),console.log(`🎨 Theme Manager iniciado - Tema atual: ${this.currentTheme}`)}applyTheme(){const e=this.shouldUseDarkMode();e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:this.currentTheme,isDark:e}})),console.log(`🎨 Tema aplicado: ${e?"dark":"light"} (configuração: ${this.currentTheme})`)}shouldUseDarkMode(){return this.currentTheme==="dark"?!0:this.currentTheme==="light"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches}listenToSystemChanges(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{this.currentTheme==="system"&&this.applyTheme()})}toggleTheme(){const e=["light","system","dark"],o=(e.indexOf(this.currentTheme)+1)%e.length;this.setTheme(e[o])}setTheme(e){this.currentTheme=e,localStorage.setItem(this.STORAGE_KEY,e),this.applyTheme(),console.log(`🎨 Tema alterado para: ${e}`)}getCurrentTheme(){return this.currentTheme}isDarkMode(){return this.shouldUseDarkMode()}getThemeIcon(){switch(this.currentTheme){case"light":return"☀️";case"dark":return"🌙";case"system":return"🖥️";default:return"🖥️"}}getThemeName(){switch(this.currentTheme){case"light":return"Claro";case"dark":return"Escuro";case"system":return"Sistema";default:return"Sistema"}}}export{h as C,u as T};
